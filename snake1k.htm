<script>
// d = direction; 0 = up, 1 = right, 2 = down, 3 = left
// c = direction change; 0 = no change, 1 = counterclockwise, 2 = clockwise
// p = positions of snake parts
// t = generic temp variable
// e = another temp variable
// a = position of apple
// A() = placeApple()
// h = snake head
// s() = function checking whether a position is inside the snake. if so, returns 1
d = 1e7;
c = 0;
x = y = 5;
p = ["5,5"];
s = function(k) {
  return ~p.indexOf(k);
};

(A = function() {
  // neuen Apfel setzen und falls in Schlange => noch mal selbst aufrufen
  s(a = (Math.random()*10^0)+","+new Date%10) && A()
})();

setInterval(function() {
  d += [0,-1,1][c];
  c = i = 0;
  t = "";

  x+=[0,1,0,-1][d%4];
  y+=[-1,0,1,0][d%4];

  (h = x+","+y).length>3 || s(h) ? location = t : d; // tot => neu laden

  p.unshift(h);

  h == a ? A() : p.pop();

  // Rendering
  while (i<100) {
    t += (s(e = i%10 + "," + (i/10^0)) ? "o" : (a==e ? "x" : ".")) + (i++%10==9 ? "\n" : "")
  }

  console.clear();
  console.log(t)
}, 700);
</script>