<script>
// d = direction; 0 = up, 1 = right, 2 = down, 3 = left
// c = direction change; 0 = no change, 1 = counterclockwise, 2 = clockwise
// p = position [x, y]
// t = generic temp variable
// e = another temp variable
// a = position of apple
// A() = placeApple()
// h = snake head
// s() = function checking whether a position is inside the snake. if so, returns 1
d = 1e7;
c = 0;
x = y = 5;
p = ["5,5"];
s = function(k) {
  return ~p.indexOf(k);
};

(A = function() {
  s(a = (Math.random()*10^0)+","+new Date%10) && A()
})();

setInterval(function() {
  d+=[0,-1,1][c];
  c=0;
  t = "";

  if (d%4==0) {
    y--
  } else if (d%4==1) {
    x++
  } else if (d%4==2) {
    y++;
  } else {
    x--;
  }

  if ((h = x+","+y).length > 3 || s(h)) {
    location+=t; // tot => neu laden
  }

  p.unshift(h);

  h == a ? A() : p.pop();

  // Rendering


  for (i=0;i<100;i++) {
    t += (s(e = i%10 + "," + (i/10^0)) ? "o" : (a==e ? "x" : ".")) + (i%10==9 ? "\n" : "");
  }

  //console.clear();
  console.log(t)
}, 700);
</script>