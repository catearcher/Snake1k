<script>
// d = direction; 0 = up, 1 = right, 2 = down, 3 = left
// c = direction change; 0 = no change, 1 = counterclockwise, 2 = clockwise
// p = position [x, y]
// t = generic temp variable
// e = another temp variable
// a = position of apple
// l = last position of tail end
// A() = placeApple()
// h = snake head
// s() = function checking whether a position is inside the snake. if so, returns 1
d = 0;
c = 0;
p = [l=[5,4]];
s = function(x,y) {
  p.forEach(function(z) {
    if (z+"" == x) {
      y = 1;
    }
  });

  return y;
};

(A = function() {
  a = [Math.random()*10^0,new Date%10]
})();

setInterval(function() {
  c==1 ? d-- : (c==2 ? d++ : d);
  c=0;
  h = p[0].slice();

  if (d%4==0) {
    h[1]--
  } else if (d%4==1) {
    h[0]++
  } else if (d%4==2) {
    h[1]++;
  } else {
    h[0]--;
  }

  p.pop();

  if (h+"" == a+"") { // Apfel wird gefressen
    p.push(l); // den bisherigen Kopf als Schwanzglied anhÃ¤ngen
    A();
  }

  if (h[0] > 9 || h[0] < 0 || h[1] > 9 || h[1] < 0 || s(h+"")) {
    location+=""; // tot => neu laden
  }

  p.unshift(h);

  l = p[p.length-1];

  // Rendering
  t = "";

  for (i=0;i<10;i++) {
    for (j=0;j<10;j++) {
      e=j+","+i;
      t += (s(e) ? "o" : (a+""==e ? "x" : "."));
    }
    t += "\n";
  }

  //console.clear();
  console.log(t);
}, 999);
</script>