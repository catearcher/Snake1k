<script>
// d = direction; 0 = up, 1 = right, 2 = down, 3 = left
// c = direction change; 0 = no change, 1 = counterclockwise, 2 = clockwise
// p = position [x, y]
// t = generic temp variable
// e = another temp variable
// a = position of apple
// A() = placeApple()
// h = snake head
// s() = function checking whether a position is inside the snake. if so, returns 1
d = 1e7;
c = 0;
p = [[5,5]];
s = function(x,y) {
  p.forEach(function(z) {
    if (z+"" == x) {
      y = 1;
    }
  });

  return y;
};

(A = function() {
  a = [Math.random()*10^0,new Date%10]
})();

setInterval(function() {
  d+=[0,-1,1][c];
  c=0;
  h = p[0].slice();

  if (d%4==0) {
    h[1]--
  } else if (d%4==1) {
    h[0]++
  } else if (d%4==2) {
    h[1]++;
  } else {
    h[0]--;
  }

  g = h+"";

  if (g.length > 3 || s(g)) {
    location+=""; // tot => neu laden
  }

  p.unshift(h);

  if (g == a+"") { // Apfel wird gefressen
    A();
  } else {
    p.pop()
  }

  // Rendering
  t = "";

  for (i=0;i<100;i++) {
    e= i%10 + "," + (i/10^0);
    t += (s(e) ? "o" : (a+""==e ? "x" : ".")) + (i%10==9 ? "\n" : "");
  }

  console.clear();
  console.log(t);
}, 999);
</script>